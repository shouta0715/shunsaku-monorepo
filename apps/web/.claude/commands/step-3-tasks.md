---
description: "技術設計を実行可能なアトミックタスクに分解"
stage: 3
prerequisite: ".tmp/step-1-requirements.md, .tmp/step-2-design.md"
duration: "2-3 minutes"
output: ".tmp/step-3-tasks.md + TodoList"
---

# 📝 タスク計画ステージ

**既存apps/webプロジェクトのメインページ上書きを前提とし、技術設計からsrc/app/layout.tsx・page.tsx置換タスクを作成し、src/内正しいディレクトリ構造での並列実行可能な作業計画を策定します。**

## 📝 使用法

```bash
/step-3-tasks   # 要件書・設計書を自動読み込みしてタスク計画を実行
```

**前提条件**: `.tmp/step-1-requirements.md`、`.tmp/step-2-design.md`
**出力**: `.tmp/step-3-tasks.md` + TodoList

## 🎯 INVEST原則

- **独立性**: 他タスクと並列実行可能
- **交渉可能性**: 要件変更に対応可能
- **価値**: ユーザー・ステークホルダーに価値提供
- **見積可能性**: 1-8時間の実装可能範囲（理想2-4時間）
- **小規模性**: アトミックで単一成果物
- **テスト可能性**: 明確な完了基準と品質ゲート

## 📝 出力テンプレート構造

- **エグゼクティブサマリー**: 総タスク数・推定工数・並列実行可能率・クリティカルパス
- **タスク依存関係図**: Mermaid Ganttチャートでの可視化
- **Phase分解**: 基盤構築→コア機能→API・データ層→機能実装→品質保証→最終品質保証→ドキュメント生成
- **各タスク詳細**: 目的・実装内容・技術詳細・品質保証・完了条件・依存関係・推定時間
- **エラーハンドリング**: 各タスクでのエラー確認・修正プロセス
- **最終品質保証**: 完全品質チェック・エラーループ処理
- **README生成指示**: 品質確認完了後の自動ドキュメント生成手順

## 📋 標準タスクフェーズ

### Phase 1: 基盤構築

- 開発環境セットアップ（パッケージ管理・依存関係）
- プロジェクト構造実装（ディレクトリ・設定・パスエイリアス）

### Phase 2: コア機能

- UIコンポーネント実装（@package/ui活用・カスタム作成）
- 状態管理実装（Zustand・型定義・DevTools）

### Phase 3: API・データ層

- モックデータ実装（MSW・エラーケース）
- API統合レイヤー（クライアント・React Query・キャッシュ）

### Phase 4: 機能実装

- ユーザー向け機能（UI・ビジネスロジック・状態接続）

### Phase 5: 品質保証

- テスト実装（Unit・Integration・E2E）
- パフォーマンス最適化（バンドル分析・Lighthouse監査）

### Phase 6: 最終品質保証

- **エラー解決**: 全lintエラー・type エラー・buildエラーを0件まで修正
- **品質チェック**: 下記の完全品質保証プロセスを実行
- **ビルド確認**: 本番ビルドが正常に完了することを確認

### Phase 7: ドキュメント生成

- **README.md作成**: 実装完了後の包括的プロジェクトドキュメント
- **自動生成**: 下記の詳細指示に従った包括的文書化
- **品質保証**: 技術仕様・セットアップ・Windows対応を含む完全性確保

## 🚀 実行プロセス

1. **設計書解析**: `.tmp/step-2-design.md`から実装ポイント抽出
2. **アトミック分解**: 1-8時間の実装可能単位（理想2-4時間）
3. **依存関係管理**: 並列実行機会の最大化
4. **TodoWrite連携**: 重要タスクの追跡システム設定
5. **エラー管理**: 各タスク完了時の必須品質確認
6. **最終品質保証**: 全実装完了後の完全品質チェック
7. **README生成指示**: 品質確認完了後の包括的ドキュメント作成計画

## 🚨 エラーハンドリング

```bash
# 設計書更新後の再計画
/step-3-tasks   # 更新された設計を自動反映
```

## 📊 品質指標

- **分解粒度**: 70%以上が並列実行可能なアトミックタスク
- **完了定義**: 機能実装・テスト・品質チェック・ドキュメント
- **実装準備度**: 技術仕様・開発環境・品質保証体制が明確
- **ドキュメント品質**: README.mdが実装内容を包括的に反映

## 📖 README自動生成指示

> **参照元**: [full-automatic.md](./full-automatic.md) Stage 4で指定されたREADME生成の詳細仕様

### 実装完了後の必須アクション

```bash
# 実装完了を確認後、以下を実行
1. 全機能の動作確認
2. 品質保証プロセス完了確認
3. apps/web/README.md の包括的作成
```

### README必須要素チェックリスト

✅ **プロジェクト概要**: 機能説明・バッジ・デモリンク  
✅ **技術スタック**: 使用技術の詳細説明  
✅ **セットアップ**: Windows環境対応含むインストール手順  
✅ **使用方法**: 具体的な操作手順・設定方法  
✅ **開発ガイド**: プロジェクト構造・品質保証プロセス  
✅ **SDD統合**: 仕様駆動開発ワークフロー説明  
✅ **セキュリティ**: データ保護・暗号化・XSS対策  
✅ **パフォーマンス**: 最適化手法・Next.js活用  
✅ **Windows制約**: PowerShell環境での制約・対応  
✅ **コントリビューション**: 品質基準・ガイドライン

### 生成タイミング

- **Phase 7完了時**: 全実装・品質保証・エラー0件確認後
- **最終確認**: 動作確認・完全品質チェック・build成功確認後

## 🔧 タスク実行時のエラーハンドリング

### 各タスク完了時の必須チェック

```bash
# 各実装タスク完了後に必ず実行
pnpm lint
pnpm typecheck

# エラーが発生した場合は修正してから次のタスクに進む
# エラーが0件になるまで修正を繰り返す
```

### タスク進行ルール

✅ **エラー0件確認**: lint・typeチェックでエラーが無いことを確認  
✅ **修正優先**: エラーがある場合は次のタスクに進まず修正を優先  
✅ **品質ゲート**: 各フェーズ完了時に品質確認

## 🏁 最終品質保証プロセス

### 全タスク完了後の必須実行

```bash
# Windows環境では個別実行（&&チェーン使用不可）
pnpm install
pnpm lint:fix
pnpm format
pnpm lint
pnpm typecheck
pnpm build
```

### エラーループ処理

```bash
# エラーが発生した場合のループ処理
1. エラー内容を確認・分析
2. 該当箇所を修正
3. 再度品質チェック実行
4. エラーが0件になるまで1-3を繰り返し
5. build成功まで継続
```

### 完了条件

✅ **lint**: エラー0件、警告0件  
✅ **typecheck**: TypeScriptエラー0件  
✅ **build**: 本番ビルド成功  
✅ **動作確認**: 開発サーバーで正常動作確認
