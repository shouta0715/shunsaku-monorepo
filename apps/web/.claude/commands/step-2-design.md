---
description: "要件を詳細な技術アーキテクチャと実装設計に変換"
stage: 2
prerequisite: ".tmp/step-1-requirements.md"
duration: "3-4 minutes"
output: ".tmp/step-2-design.md"
---

# 🏗️ 技術設計ステージ

**要件仕様書からコンポーネント設計、API仕様、データ構造、セキュリティ対策を含む実装可能な技術仕様書を作成します。**

## 📝 使用法

```bash
/step-2-design   # 要件書を自動読み込みして技術設計を実行
```

**前提条件**: `.tmp/step-1-requirements.md`の存在
**出力**: `.tmp/step-2-design.md` - Mermaid図表含む技術仕様書

## 🎯 設計原則

- **スケーラビリティ**: モジュラー・疎結合設計
- **保守性**: SOLID原則・明確な責任分担
- **パフォーマンス**: コード分割・キャッシュ戦略
- **セキュリティ**: 多層防御・XSS/CSRF対策
- **テスタビリティ**: 依存性注入・モック化対応

## 📐 出力テンプレート構造

- **アーキテクチャ概要**: システム構成図・技術スタック・ディレクトリ構造
- **コンポーネント設計**: @package/ui活用・カスタムコンポーネント仕様・階層設計
- **状態管理設計**: グローバル/ローカル状態・Zustand/Context戦略
- **API設計**: エンドポイント・データモデル・型定義
- **モックデータ戦略**: MSW設定・開発用データ
- **セキュリティ設計**: 認証フロー・CSRF/XSS対策・バリデーション
- **パフォーマンス最適化**: コード分割・キャッシング・バンドル最適化
- **テスト設計**: 単体・統合・E2Eテスト戦略
- **実装優先順位**: MVP・拡張機能のフェーズ計画

## 🚀 実行プロセス

1. **要件理解**: `.tmp/step-1-requirements.md`分析と技術的課題特定
2. **アーキテクチャ設計**: システム構造・データフロー・状態管理戦略
3. **詳細設計**: コンポーネント・API・セキュリティ・テスト戦略
4. **品質確保**: パフォーマンス対策・エラーハンドリング

## 🚨 エラーハンドリング

```bash
# 要件書更新後の再設計
/step-2-design   # 更新された要件を自動反映
```

## 📊 品質指標

- **SOLID原則**: 単一責任・開放閉鎖・依存性逆転の適用
- **@package/ui活用**: 既存コンポーネント優先・必要最小限のカスタム作成
- **実装準備度**: タスク分解に十分な技術仕様の詳細レベル
