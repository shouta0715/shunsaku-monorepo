# 離職リスク予測ダッシュボード - 詳細要件分析書

## プロジェクト概要

**アプリ名**: 離職リスク予測ダッシュボード  
**キャッチコピー**: 「日々の声から、未来の離職をゼロへ。」  
**技術スタック**: Next.js 15, React 19, TypeScript, Tailwind CSS, Zustand

---

## 1. 機能要件 (Functional Requirements)

### 1.1 アンケート機能

#### 1.1.1 日次アンケート回答機能

- **概要**: 社員が退勤時に5問5択のアンケートに回答
- **アンケート項目**:
  1. 今日の業務負荷はどうでしたか？（1: 軽すぎる 〜 5: 重すぎる）
  2. 上司・同僚との関係はどうでしたか？（1: 悪い 〜 5: 良い）
  3. 今日の達成感はどうでしたか？（1: 低い 〜 5: 高い）
  4. 仕事へのモチベーションはどうでしたか？（1: 低い 〜 5: 高い）
  5. 明日も頑張ろうと思いますか？（1: 思わない 〜 5: 強く思う）
- **回答時間制限**: 2分以内（タイムアウト機能）
- **回答状況管理**: 未回答者の自動通知・督促機能

#### 1.1.2 アンケート設定・管理機能

- **質問項目のカスタマイズ**: 管理者による質問内容の変更・追加
- **回答期間設定**: 日次回答の有効時間帯設定
- **部署別質問**: 部署固有の追加質問設定機能

### 1.2 スコアリング機能

#### 1.2.1 個人満足度スコア算出

- **基本スコア**: 5問の平均値（1-5点）を100点満点に換算
- **重み付けスコア**: 質問項目ごとの重要度設定機能
- **トレンドスコア**: 7日間、30日間の移動平均算出
- **変動率**: 前日・前週・前月比の変化率計算

#### 1.2.2 離職リスクスコア算出

- **リスクレベル**: 低（緑）、中（黄）、高（赤）の3段階評価
- **算出ロジック**:
  - 直近7日間の平均スコア < 60点: 高リスク
  - 直近7日間の平均スコア 60-80点: 中リスク
  - 直近7日間の平均スコア > 80点: 低リスク
- **急変動検知**: 3日連続でスコア10点以上下降時に高リスク判定

### 1.3 可視化・ダッシュボード機能

#### 1.3.1 個人ダッシュボード（一般社員用）

- **個人スコア推移グラフ**: 日次・週次・月次の切り替え表示
- **項目別レーダーチャート**: 5つの質問項目の可視化
- **過去比較機能**: 任意期間との比較表示
- **目標設定機能**: 個人目標スコア設定・達成状況表示

#### 1.3.2 管理者ダッシュボード

- **チーム全体サマリー**:
  - チーム平均スコア・推移
  - リスクレベル別人数分布
  - 回答率統計
- **個人別詳細ビュー**:
  - 部下のスコア一覧・推移
  - リスク高メンバーのハイライト表示
  - 個人別詳細分析画面への遷移
- **比較分析機能**:
  - 部署間比較
  - 過去同期間との比較
  - ベンチマーク表示

#### 1.3.3 人事・経営陣ダッシュボード

- **全社統計**:
  - 全社平均スコア・推移
  - 部署別ランキング・分析
  - 離職リスク予測レポート
- **トレンド分析**:
  - 季節変動分析
  - イベント・施策効果測定
  - 予測モデルによる将来予測

### 1.4 アラート・通知機能

#### 1.4.1 リアルタイムアラート

- **高リスク検知アラート**: 離職リスク高判定時の即座通知
- **急変動アラート**: スコア急降下時の自動通知
- **未回答アラート**: 連続未回答者への督促通知

#### 1.4.2 定期レポート機能

- **週次レポート**: 毎週月曜日に前週サマリー配信
- **月次レポート**: 毎月1日に前月詳細レポート配信
- **カスタムレポート**: 任意期間・項目でのレポート生成

### 1.5 ユーザー管理機能

#### 1.5.1 認証・認可

- **ログイン機能**: メールアドレス・パスワード認証
- **ロール管理**: 一般社員・管理者・人事・システム管理者
- **権限制御**: ロール別アクセス制限

#### 1.5.2 プロフィール管理

- **基本情報**: 氏名・部署・役職・入社日
- **通知設定**: アラート受信設定・頻度調整
- **プライバシー設定**: データ公開範囲設定

---

## 2. 非機能要件 (Non-Functional Requirements)

### 2.1 パフォーマンス要件

#### 2.1.1 レスポンス時間

- **ページ読み込み**: 初回3秒以内、以降1秒以内
- **アンケート回答**: 送信から完了まで2秒以内
- **ダッシュボード更新**: 5秒以内
- **レポート生成**: 30秒以内（大容量データも含む）

#### 2.1.2 同時利用者数

- **想定ユーザー数**: 1,000名同時アクセス対応
- **ピーク時対応**: 退勤時間帯（17-19時）の集中アクセス
- **スケーラビリティ**: 10,000名まで対応可能な拡張性

#### 2.1.3 可用性

- **稼働率**: 99.9%以上（月間ダウンタイム43分以内）
- **メンテナンス**: 計画メンテナンスは深夜時間帯に実施
- **障害復旧**: 1時間以内の復旧目標

### 2.2 セキュリティ要件

#### 2.2.1 個人情報保護

- **データ暗号化**: 保存時・転送時ともにAES-256暗号化
- **アクセスログ**: 全データアクセスの記録・監査
- **匿名化機能**: 統計データでの個人特定不可処理

#### 2.2.2 アクセス制御

- **多要素認証**: 管理者以上は2FA必須
- **セッション管理**: 30分無操作でのタイムアウト
- **不正アクセス対策**: 連続ログイン失敗時のアカウントロック

#### 2.2.3 データガバナンス

- **データ保持期間**: 個人データ3年、統計データ7年
- **削除権**: 個人による自身データ削除要求対応
- **監査証跡**: 全データ操作の完全な履歴保持

### 2.3 拡張性・保守性

#### 2.3.1 システム拡張性

- **マイクロサービス対応**: 機能単位での独立デプロイ
- **API設計**: RESTful API・GraphQL対応
- **データベース拡張**: 水平分散対応設計

#### 2.3.2 保守性

- **コード品質**: TypeScript厳格型チェック・ESLint/Prettier
- **テストカバレッジ**: 90%以上のテストカバレッジ
- **ドキュメント**: API仕様書・運用手順書の完備

---

## 3. ユーザーストーリー

### 3.1 一般社員のストーリー

#### US-001: 日次アンケート回答

**As a** 一般社員  
**I want to** 退勤時に簡単なアンケートに回答する  
**So that** 自分の満足度を記録し、職場環境改善に貢献できる

**受入条件**:

- 5問5択形式で2分以内に回答完了できる
- スマートフォンからも快適に回答できる
- 回答後に簡単なフィードバックが表示される

#### US-002: 個人スコア確認

**As a** 一般社員  
**I want to** 自分の満足度推移を確認する  
**So that** 自分の状態を客観視し、必要に応じて相談できる

**受入条件**:

- 直感的なグラフで推移を把握できる
- 他者と比較されない個人専用表示
- プライバシーが完全に保護されている

### 3.2 管理者のストーリー

#### US-003: チーム状況モニタリング

**As a** チーム管理者  
**I want to** 部下の満足度を一覧で確認する  
**So that** 早期にフォローが必要なメンバーを特定できる

**受入条件**:

- リスクレベル別での並び替え・フィルタリング
- 個人名での検索機能
- 詳細分析画面への遷移機能

#### US-004: 早期フォロー実施

**As a** チーム管理者  
**I want to** 満足度低下メンバーに迅速にアプローチする  
**So that** 離職リスクを未然に防げる

**受入条件**:

- アラート通知から即座にアクション可能
- フォロー履歴の記録機能
- 改善効果の測定機能

### 3.3 人事担当者のストーリー

#### US-005: 全社分析・レポート

**As a** 人事担当者  
**I want to** 全社の満足度データを分析する  
**So that** 組織課題を発見し、効果的な施策を立案できる

**受入条件**:

- 部署・役職・年代別の詳細分析
- トレンド分析・予測機能
- カスタムレポート出力機能

---

## 4. データ要件

### 4.1 データモデル

#### 4.1.1 ユーザー関連

```typescript
interface User {
  id: string;
  email: string;
  name: string;
  department: string;
  position: string;
  hireDate: Date;
  managerId?: string;
  role: "employee" | "manager" | "hr" | "admin";
  isActive: boolean;
  createdAt: Date;
  updatedAt: Date;
}
```

#### 4.1.2 アンケート関連

```typescript
interface Survey {
  id: string;
  userId: string;
  date: Date;
  responses: SurveyResponse[];
  totalScore: number;
  submittedAt: Date;
}

interface SurveyResponse {
  questionId: string;
  score: number; // 1-5
}

interface Question {
  id: string;
  text: string;
  category: string;
  weight: number;
  isActive: boolean;
}
```

#### 4.1.3 スコア・分析関連

```typescript
interface DailyScore {
  id: string;
  userId: string;
  date: Date;
  totalScore: number;
  riskLevel: "low" | "medium" | "high";
  categoryScores: CategoryScore[];
  calculatedAt: Date;
}

interface CategoryScore {
  category: string;
  score: number;
  weight: number;
}
```

### 4.2 データフロー

#### 4.2.1 アンケート回答フロー

1. ユーザーログイン認証
2. 当日アンケート存在チェック
3. 質問項目取得・表示
4. 回答データ検証・保存
5. スコア計算・更新
6. リスク評価・アラート判定

#### 4.2.2 リアルタイム分析フロー

1. 回答データ更新検知
2. 個人スコア再計算
3. チーム統計更新
4. リスクレベル評価
5. アラート条件チェック
6. 通知配信・ダッシュボード更新

---

## 5. UI/UX要件

### 5.1 デザイン原則

#### 5.1.1 ユーザビリティ

- **シンプル性**: 最小限の操作で目的達成
- **直感性**: 説明不要の分かりやすいUI
- **一貫性**: 全画面での統一されたデザイン言語

#### 5.1.2 アクセシビリティ

- **WCAG 2.1 AA準拠**: 国際的なアクセシビリティ基準対応
- **キーボード操作**: 全機能のキーボードアクセス対応
- **スクリーンリーダー**: 視覚障害者向け読み上げ対応
- **カラーコントラスト**: 4.5:1以上のコントラスト比確保

### 5.2 レスポンシブデザイン

#### 5.2.1 ブレークポイント

- **スマートフォン**: 320px - 767px
- **タブレット**: 768px - 1023px
- **デスクトップ**: 1024px以上

#### 5.2.2 デバイス別最適化

- **スマートフォン**: アンケート回答に特化した縦型レイアウト
- **タブレット**: ダッシュボード表示最適化
- **デスクトップ**: 全機能アクセス可能な管理画面

### 5.3 視覚デザイン

#### 5.3.1 カラーパレット

- **プライマリ**: #3B82F6 (青系 - 信頼・安定)
- **セカンダリ**: #10B981 (緑系 - 成長・ポジティブ)
- **警告**: #F59E0B (オレンジ - 注意)
- **危険**: #EF4444 (赤 - 緊急・高リスク)
- **グレースケール**: #F9FAFB, #F3F4F6, #E5E7EB, #9CA3AF, #6B7280, #374151, #1F2937

#### 5.3.2 タイポグラフィ

- **フォントファミリー**: Inter, Noto Sans JP
- **見出し**: 24px, 20px, 18px, 16px
- **本文**: 14px, 16px
- **キャプション**: 12px

---

## 6. システム制約・前提条件

### 6.1 技術制約

#### 6.1.1 開発環境制約

- **フレームワーク**: Next.js 15 (App Router)
- **言語**: TypeScript 5.x
- **状態管理**: Zustand 4.x
- **スタイリング**: Tailwind CSS 4.x
- **UI コンポーネント**: Headless UI, Lucide React
- **バリデーション**: Zod 3.x
- **フォーム**: React Hook Form 7.x

#### 6.1.2 インフラ制約

- **ホスティング**: Vercel または AWS
- **データベース**: PostgreSQL または MySQL
- **認証**: NextAuth.js または Auth0
- **ファイルストレージ**: AWS S3 または Vercel Blob
- **監視**: Vercel Analytics または DataDog

### 6.2 既存システム連携

#### 6.2.1 人事システム連携

- **ユーザー情報同期**: 既存人事DBからの社員情報取得
- **組織構造同期**: 部署・役職情報の定期同期
- **入退社情報**: リアルタイム情報更新

#### 6.2.2 通知システム連携

- **メール配信**: 既存メールシステムとの連携
- **Slack/Teams**: チャットツールへの通知配信
- **SMS**: 緊急時のSMS通知機能

### 6.3 法規制・コンプライアンス

#### 6.3.1 個人情報保護法対応

- **利用目的明示**: データ収集目的の明確化
- **同意取得**: 個人情報利用への明示的同意
- **開示・訂正**: 個人データの開示・訂正・削除対応
- **安全管理措置**: 技術的・組織的安全管理措置の実装

#### 6.3.2 労働関連法規

- **労働基準法**: 労働時間管理への配慮
- **労働安全衛生法**: メンタルヘルス管理の適切な実施
- **プライバシー権**: 従業員プライバシーの最大限の保護

### 6.4 運用制約

#### 6.4.1 サポート体制

- **営業時間**: 平日9:00-18:00のサポート対応
- **緊急時**: 24時間体制の障害対応
- **ユーザーサポート**: FAQ、チャット、メールサポート

#### 6.4.2 メンテナンス

- **定期メンテナンス**: 月1回、日曜深夜実施
- **セキュリティアップデート**: 緊急時は随時実施
- **機能アップデート**: 四半期に1回の機能追加

---

## 7. 実装優先度・フェーズ分け

### Phase 1: 基本機能（MVP）

- ユーザー認証・管理
- 日次アンケート機能
- 基本スコアリング
- 個人ダッシュボード
- 管理者ダッシュボード（基本版）

### Phase 2: 分析・アラート機能

- 詳細分析機能
- リアルタイムアラート
- レポート機能
- 人事ダッシュボード

### Phase 3: 高度な機能

- 予測分析
- カスタムレポート
- API連携
- モバイルアプリ

---

## 8. 成功指標・KPI

### 8.1 システム利用指標

- **回答率**: 日次アンケート回答率 90%以上
- **継続利用率**: 月間アクティブユーザー率 95%以上
- **システム満足度**: ユーザー満足度調査 4.0/5.0以上

### 8.2 ビジネス成果指標

- **離職率改善**: 導入前比20%削減目標
- **早期発見率**: 離職リスク早期発見率 80%以上
- **フォロー効果**: フォロー実施後の満足度改善率 70%以上

---

**文書作成日**: 2025-08-04  
**作成者**: Claude Code Analysis  
**バージョン**: 1.0
